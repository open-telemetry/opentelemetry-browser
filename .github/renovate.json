{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices",
    "helpers:pinGitHubActionDigestsToSemver"
  ],
  "rebaseWhen": "conflicted",
  "postUpdateOptions": ["npmDedupe"],
  "schedule": ["before 8am on Monday"],
  "labels": ["dependencies"],
  "packageRules": [
    {
      "description": "GitHub Actions",
      "matchManagers": ["github-actions"],
      "groupName": "github-actions"
    },
    {
      "description": "Production dependencies (non-OTel)",
      "matchDepTypes": ["dependencies"],
      "groupName": "production-deps"
    },
    {
      "description": "Dev patches and minors",
      "matchDepTypes": ["devDependencies"],
      "matchUpdateTypes": ["patch", "minor"],
      "groupName": "dev-deps"
    },
    {
      "description": "Dev major updates",
      "matchDepTypes": ["devDependencies"],
      "matchUpdateTypes": ["major"],
      "groupName": "dev-deps-major"
    },
    {
      "description": "OpenTelemetry group",
      "matchDepNames": ["@opentelemetry/*"],
      "matchDepTypes": ["dependencies", "devDependencies"],
      "rangeStrategy": "bump",
      "groupName": "opentelemetry"
    },
    {
      "description": "Vitest packages must stay version-aligned",
      "matchDepNames": ["vitest", "@vitest/*"],
      "groupName": "vitest"
    },
    {
      "description": "Turbo packages must stay version-aligned",
      "matchDepNames": ["turbo", "@turbo/*"],
      "groupName": "turbo"
    },
    {
      "description": "Commitlint packages must stay version-aligned",
      "matchDepNames": ["@commitlint/*"],
      "groupName": "commitlint"
    }
  ]
}
